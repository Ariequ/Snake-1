var h=void 0,j=!0,m=null,p=!1,s,t=this;function aa(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==h?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"string"==typeof a}var v="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ca=0,da=Date.now||function(){return+new Date};function ea(a){a=String(a);var b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a};var w=Array.prototype,fa=w.indexOf?function(a,b,c){return w.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(u(a))return!u(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ga=w.forEach?function(a,b,c){w.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=u(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)};var ha={fa:["BC","AD"],ea:["Before Christ","Anno Domini"],ha:"JFMAMJJASOND".split(""),pa:"JFMAMJJASOND".split(""),ga:"January February March April May June July August September October November December".split(" "),oa:"January February March April May June July August September October November December".split(" "),ka:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ra:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),va:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
ta:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ma:"Sun Mon Tue Wed Thu Fri Sat".split(" "),sa:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ia:"SMTWTFS".split(""),qa:"SMTWTFS".split(""),la:["Q1","Q2","Q3","Q4"],ja:["1st quarter","2nd quarter","3rd quarter","4th quarter"],ca:["AM","PM"],da:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],ua:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],W:6,wa:[5,6],X:5};function ia(a,b,c){"number"==typeof a?(this.c=new Date(a,b||0,c||1),ja(this,c||1)):(b=typeof a,"object"==b&&a!=m||"function"==b?(this.c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),ja(this,a.getDate())):(this.c=new Date(da()),this.c.setHours(0),this.c.setMinutes(0),this.c.setSeconds(0),this.c.setMilliseconds(0)))}s=ia.prototype;s.M=ha.W;s.N=ha.X;s.q=function(){var a=new ia(this.c);a.M=this.M;a.N=this.N;return a};s.getFullYear=function(){return this.c.getFullYear()};s.getYear=function(){return this.getFullYear()};
s.getMonth=function(){return this.c.getMonth()};s.getDate=function(){return this.c.getDate()};s.getUTCHours=function(){return this.c.getUTCHours()};s.K=function(a){return this.getYear()==a.getYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()};s.toString=function(){return[this.getFullYear(),ea(this.getMonth()+1),ea(this.getDate())].join("")+""};function ja(a,b){a.getDate()!=b&&a.c.setUTCHours(a.c.getUTCHours()+(a.getDate()<b?1:-1))}s.valueOf=function(){return this.c.valueOf()};var x,ka,y,la;function ma(){return t.navigator?t.navigator.userAgent:m}la=y=ka=x=p;var z;if(z=ma()){var na=t.navigator;x=0==z.indexOf("Opera");ka=!x&&-1!=z.indexOf("MSIE");y=!x&&-1!=z.indexOf("WebKit");la=!x&&!y&&"Gecko"==na.product}var oa=x,B=ka,C=la,D=y,pa=t.navigator,qa=-1!=(pa&&pa.platform||"").indexOf("Mac");function ra(){var a=t.document;return a?a.documentMode:h}var E;
a:{var F="",G;if(oa&&t.opera)var sa=t.opera.version,F="function"==typeof sa?sa():sa;else if(C?G=/rv\:([^\);]+)(\)|;)/:B?G=/MSIE\s+([^\);]+)(\)|;)/:D&&(G=/WebKit\/(\S+)/),G)var ta=G.exec(ma()),F=ta?ta[1]:"";if(B){var ua=ra();if(ua>parseFloat(F)){E=String(ua);break a}}E=F}var va={};
function H(a){var b;if(!(b=va[a])){b=0;for(var c=String(E).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",k=d[e]||"",l=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=l.exec(g)||["","",""],n=q.exec(k)||["","",""];if(0==r[0].length&&0==n[0].length)break;b=((0==r[1].length?0:parseInt(r[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==r[1].length?0:parseInt(r[1],
10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==r[2].length)<(0==n[2].length)?-1:(0==r[2].length)>(0==n[2].length)?1:0)||(r[2]<n[2]?-1:r[2]>n[2]?1:0)}while(0==b)}b=va[a]=0<=b}return b}var wa=t.document,xa=!wa||!B?h:ra()||("CSS1Compat"==wa.compatMode?parseInt(E,10):5);!C&&!B||B&&B&&9<=xa||C&&H("1.9.1");B&&H("9");function I(a,b){this.width=a;this.height=b}I.prototype.q=function(){return new I(this.width,this.height)};I.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};I.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};I.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function J(a){return u(a)?document.getElementById(a):a}function ya(a){for(var b;b=a.firstChild;)a.removeChild(b)}function K(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ya(a),a.appendChild((9==a.nodeType?a:a.ownerDocument||a.document).createTextNode(b))};function L(a,b){if("FORM"==a.tagName)for(var c=a.elements,d=0;a=c[d];d++)L(a,b);else b==j&&a.blur(),a.disabled=b}function za(a){var b=a.type;if(b===h)return m;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:m;case "select-one":return b=a.selectedIndex,0<=b?a.options[b].value:m;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:m;default:return a.value!==h?a.value:m}};var Aa=!B||B&&9<=xa,Ba=B&&!H("9");!D||H("528");C&&H("1.9b")||B&&H("8")||oa&&H("9.5")||D&&H("528");C&&!H("8")||B&&H("9");function M(a,b){this.type=a;this.currentTarget=this.target=b}M.prototype.I=p;M.prototype.defaultPrevented=p;M.prototype.aa=j;M.prototype.preventDefault=function(){this.defaultPrevented=j;this.aa=p};function Ca(a){Ca[" "](a);return a}Ca[" "]=function(){};function N(a,b){a&&this.B(a,b)}function Da(){}Da.prototype=M.prototype;N.ba=M.prototype;N.prototype=new Da;s=N.prototype;s.target=m;s.relatedTarget=m;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=p;s.altKey=p;s.shiftKey=p;s.metaKey=p;s.$=p;s.L=m;
s.B=function(a,b){var c=this.type=a.type;M.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(C){var f;a:{try{Ca(d.nodeName);f=j;break a}catch(e){}f=p}f||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=D||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=D||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.$=qa?a.metaKey:a.ctrlKey;this.state=a.state;this.L=a;a.defaultPrevented&&this.preventDefault();delete this.I};
s.preventDefault=function(){N.ba.preventDefault.call(this);var a=this.L;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,Ba)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};function Ea(){}var Fa=0;s=Ea.prototype;s.key=0;s.r=p;s.v=p;s.B=function(a,b,c,d,f,e){if("function"==ba(a))this.R=j;else if(a&&a.handleEvent&&"function"==ba(a.handleEvent))this.R=p;else throw Error("Invalid listener argument");this.C=a;this.U=b;this.src=c;this.type=d;this.capture=!!f;this.P=e;this.v=p;this.key=++Fa;this.r=p};s.handleEvent=function(a){return this.R?this.C.call(this.P||this.src,a):this.C.handleEvent.call(this.C,a)};var O={},P={},Q={},R={};
function Ga(a,b,c,d,f){if("array"==ba(b))for(var e=0;e<b.length;e++)Ga(a,b[e],c,d,f);else a:{if(!b)throw Error("Invalid event type");d=!!d;var g=P;b in g||(g[b]={j:0,p:0});g=g[b];d in g||(g[d]={j:0,p:0},g.j++);var g=g[d],e=a[v]||(a[v]=++ca),k;g.p++;if(g[e]){k=g[e];for(var l=0;l<k.length;l++)if(g=k[l],g.C==c&&g.P==f){if(g.r)break;k[l].v=p;break a}}else k=g[e]=[],g.j++;var q=Ha,r=Aa?function(a){return q.call(r.src,r.key,a)}:function(a){a=q.call(r.src,r.key,a);if(!a)return a},l=r;l.src=a;g=new Ea;g.B(c,
l,a,b,d,f);g.v=p;c=g.key;l.key=c;k.push(g);O[c]=g;Q[e]||(Q[e]=[]);Q[e].push(g);a.addEventListener?(a==t||!a.Y)&&a.addEventListener(b,l,d):a.attachEvent(b in R?R[b]:R[b]="on"+b,l)}}function Ia(a,b,c,d){if(!d.D&&d.T){for(var f=0,e=0;f<d.length;f++)d[f].r?d[f].U.src=m:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.T=p;0==e&&(delete P[a][b][c],P[a][b].j--,0==P[a][b].j&&(delete P[a][b],P[a].j--),0==P[a].j&&delete P[a])}}
function Ja(a,b,c,d,f){var e=1;b=b[v]||(b[v]=++ca);if(a[b]){a.p--;a=a[b];a.D?a.D++:a.D=1;try{for(var g=a.length,k=0;k<g;k++){var l=a[k];l&&!l.r&&(e&=Ka(l,f)!==p)}}finally{a.D--,Ia(c,d,b,a)}}return Boolean(e)}
function Ka(a,b){if(a.v){var c=a.key;if(O[c]){var d=O[c];if(!d.r){var f=d.src,e=d.type,g=d.U,k=d.capture;f.removeEventListener?(f==t||!f.Y)&&f.removeEventListener(e,g,k):f.detachEvent&&f.detachEvent(e in R?R[e]:R[e]="on"+e,g);f=f[v]||(f[v]=++ca);if(Q[f]){var g=Q[f],l=fa(g,d);0<=l&&w.splice.call(g,l,1);0==g.length&&delete Q[f]}d.r=j;if(d=P[e][k][f])d.T=j,Ia(e,k,f,d);delete O[c]}}}return a.handleEvent(b)}
function Ha(a,b){if(!O[a])return j;var c=O[a],d=c.type,f=P;if(!(d in f))return j;var f=f[d],e,g;if(!Aa){var k;if(!(k=b))a:{k=["window","event"];for(var l=t;e=k.shift();)if(l[e]!=m)l=l[e];else{k=m;break a}k=l}e=k;k=j in f;l=p in f;if(k){if(0>e.keyCode||e.returnValue!=h)return j;a:{var q=p;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(r){q=j}if(q||e.returnValue==h)e.returnValue=j}}q=new N;q.B(e,this);e=j;try{if(k){for(var n=[],Z=q.currentTarget;Z;Z=Z.parentNode)n.push(Z);g=f[j];g.p=g.j;for(var A=n.length-
1;!q.I&&0<=A&&g.p;A--)q.currentTarget=n[A],e&=Ja(g,n[A],d,j,q);if(l){g=f[p];g.p=g.j;for(A=0;!q.I&&A<n.length&&g.p;A++)q.currentTarget=n[A],e&=Ja(g,n[A],d,p,q)}}else e=Ka(c,q)}finally{n&&(n.length=0)}return e}d=new N(b,this);return e=Ka(c,d)};function La(){var a=20;"number"==typeof a&&(a=Math.round(a)+"px");return a}function Ma(a){a=a.style;a.position="relative";B&&!H("8")?(a.zoom="1",a.display="inline"):a.display=C?H("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};function S(){this.n=[]}S.prototype.h=0;S.prototype.i=0;function Na(a){if(a.h!=a.i){var b=a.n[a.h];delete a.n[a.h];a.h++;return b}}S.prototype.clear=function(){this.i=this.h=this.n.length=0};S.prototype.z=function(){return this.n.slice(this.h,this.i)};function T(a){var b={squareSize:20,boardWidth:30,boardHeight:15};a=a||{};for(var c in b)"undefined"===typeof a[c]&&(a[c]=b[c]);this.na=a.squareSize;this.g=new I(a.boardWidth,a.boardHeight);this.k=j;this.l=p;this.t=10;this.a=this.w=this.map=m;this.Q=p;this.s={};Ga(document,"keydown",this.Z,p,this)}s=T.prototype;
s.Z=function(a){if(a)switch(a.keyCode){case 37:case 38:case 39:case 40:if(!this.l){var b=this.a;switch(a.keyCode){case 37:b.o!=U&&(b.m=3);break;case 38:2!=b.o&&(b.m=1);break;case 39:3!=b.o&&(b.m=U);break;case 40:1!=b.o&&(b.m=2)}}break;case 32:Oa(this);break;case 76:this.k&&this.S();break;case 78:this.k&&this.V();break;case 83:this.k||this.J()}};
s.V=function(){this.O=J("gameBoard");this.u=J("snakeSpeedForm");this.l=this.k=p;var a;a:if(a=this.u.elements.snakeSpeed,a.type)a=za(a);else{for(var b=0;b<a.length;b++){var c=za(a[b]);if(c){a=c;break a}}a=m}this.t=a;L(this.u,j);J("finalScore").style.display="none";K(J("counter"),"0");this.map=new Pa(this.g);a=new SnakeCoordinates(Math.floor(this.g.height/2),Math.floor(this.g.width/2));V(this.map,W,a);this.a=new X(1,a);Qa(this);this.move()};
function Qa(a,b){for(var c=new SnakeCoordinates(b?b.e:Math.floor(Math.random()*a.g.width),b?b.d:Math.floor(Math.random()*a.g.height));Ra(a.map,c)!=Sa;)c.e=Math.floor(Math.random()*a.g.width),c.d=Math.floor(Math.random()*a.g.height);V(a.map,Y,c);a.w=c}
s.move=function(){if(!this.l){var a=this.a.move();switch(Ra(this.map,a)){case Ta:Na(this.a.b);Ua(this);return;case Y:var b=Date.now();K(J("counter"),this.a.b.i-this.a.b.h-1+"");Qa(this);var c=Date.now();c-b&&console.log(c-b);break;default:this.map.clear(Na(this.a.b))}a=V(this.map,W,a);a===$||a===W?Ua(this):setTimeout("snakeManager.move()",1E3/this.t)}};
function Ua(a){a.k=j;K(J("finalScoreNum"),a.a.b.i-a.a.b.h-1+"");Ma(J("finalScore"));L(a.u,p);var b=document.createElement("DIV");b.className="previous-scores-text";K(b,a.a.b.i-a.a.b.h-1+"");J("previousScores").appendChild(b)}s.J=function(){this.k||(this.s.snake=this.a.q(),this.s.snakeSpeed=this.t,this.s.gemCoordinates=this.w.q(),this.Q=j)};
s.S=function(){if(this.k&&this.Q){this.l=this.k=p;this.a=this.s.snake;this.t=this.s.snakeSpeed;this.w=this.s.gemCoordinates;this.J();for(var a=this.u.elements.snakeSpeed,b=0;b<a.length;b++)a[b].checked=parseInt(a[b].value,10)!=this.t?p:j;L(this.u,j);J("finalScore").style.display="none";K(J("counter"),this.a.b.i-this.a.b.h-1+"");ya(this.O);for(var c=0;c<this.g.height;c++){a=document.createElement("DIV");a.id="row"+c;for(var d=0;d<this.g.width;d++)b=document.createElement("DIV"),b.id="spot"+c+"-"+d,
b.style.height=La(),b.style.width=La(),Ma(b),a.appendChild(b);this.O.appendChild(a)}this.map=new Pa(this.g);Qa(this,this.w);ga(this.a.z(),function(a){this.a.head!==h&&this.a.head.K(a)?V(this.map,W,a):V(this.map,$,a)},this);Oa(this)}};function Oa(a){a.k||(a.l=!a.l,J("pauseButton").value=a.l?"Resume":"Pause",J("pauseGameOverlay").style.display=a.l?"block":"none",a.l||setTimeout("snakeManager.move()",1E3/a.t))}function X(a,b){this.id=a;this.o=this.m=U;this.head=b;var c=this.b=new S;c.n[c.i++]=b}
var U=4;X.prototype.q=function(){var a=new X(this.id,this.head);a.m=this.m;a.o=this.o;a.b=new S;ga(this.b.z(),function(b){a.append(b)},this);return a};X.prototype.z=function(){return this.b.z()};X.prototype.append=function(a){var b=this.head;this.head=a;var c=this.b;c.n[c.i++]=a;return b};X.prototype.move=function(){var a=this.head.q();switch(this.m){case 3:a.d--;break;case 1:a.e--;break;case U:a.d++;break;case 2:a.e++}this.head=a;var b=this.b;b.n[b.i++]=a;this.o=this.m;return a};
SnakeCoordinates=function(a,b){this.e=a;this.d=b};SnakeCoordinates.prototype.q=function(){return new SnakeCoordinates(this.e,this.d)};SnakeCoordinates.prototype.K=function(a){return this.e===a.e&&this.d===a.d};function Pa(a){this.size=a;this.F=[];for(a=0;a<this.size.height;a++)this.F[a]=[]}function Ra(a,b){if(Va(a,b)){var c=a.F[b.e][b.d];return c?c.G:Sa}return Ta}
function V(a,b,c){var d=Ra(a,c);Va(a,c)&&(b=new Wa(c,b),a.F[c.e][c.d]=b,Xa(b),b.G===W&&(a.A!==h&&Ra(a,a.A.H)===W&&(a.A.G=$,Xa(a.A)),a.A=b));return d}Pa.prototype.clear=function(a){if(Va(this,a)){var b=new Wa(a,Sa);this.F[a.e][a.d]=b;Xa(b)}};function Va(a,b){return 0<=b.e&&b.e<a.size.height&&0<=b.d&&b.d<a.size.width}
function Wa(a,b){this.H=a;this.G=b;this.f={};switch((new ia).getMonth()){case 9:this.f[W]="url('images/head_halloween.png')";this.f[$]="url('images/body_halloween.png')";this.f[Y]="url('images/gem_halloween.png')";break;case 10:this.f[W]="url('images/head_turkey.png')";this.f[$]="url('images/body_turkey.png')";this.f[Y]="url('images/gem_turkey.png')";break;case 11:this.f[W]="url('images/head_christmas.png')";this.f[$]="url('images/body_christmas.png')";this.f[Y]="url('images/gem_christmas.png')";
break;default:this.f[W]="url('images/head_default.png')",this.f[$]="url('images/body_default.png')",this.f[Y]="url('images/gem_default.png')"}}function Xa(a){var b=J("spot"+a.H.e+"-"+a.H.d);b&&(b.style.backgroundImage=a.f[a.G]||"")}var Ta=0,Sa=1,W=2,$=3,Y=4;aa("Snake",X);aa("SnakeManager",T);aa("SnakeState",{});T.prototype.move=T.prototype.move;T.prototype.startGame=T.prototype.V;T.prototype.saveGame=T.prototype.J;T.prototype.loadGame=T.prototype.S;